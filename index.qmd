---
title: "GitHub Wrapped 2025"
format:
  html:
    page-layout: full
execute:
  echo: false
  warning: false
---

```{python}
#| label: setup
import requests
import os
from datetime import datetime, timedelta
from collections import defaultdict
from IPython.display import display, HTML
import json

# Configuration - Set your GitHub username here
GITHUB_USERNAME = "isfarbaset"
YEAR = 2025

# GitHub API base URL
API_BASE = "https://api.github.com"
GRAPHQL_URL = "https://api.github.com/graphql"

# GitHub token for API access
GITHUB_TOKEN = os.environ.get("GITHUB_TOKEN", "")

headers = {
    "Accept": "application/vnd.github.v3+json",
    "User-Agent": "GitHub-Wrapped-2025"
}
if GITHUB_TOKEN:
    headers["Authorization"] = f"Bearer {GITHUB_TOKEN}"

def fetch_user_data(username):
    """Fetch basic user information"""
    response = requests.get(f"{API_BASE}/users/{username}", headers=headers)
    if response.status_code == 200:
        return response.json()
    return None

def fetch_repos(username):
    """Fetch all repositories for a user"""
    repos = []
    page = 1
    while True:
        response = requests.get(
            f"{API_BASE}/users/{username}/repos",
            headers=headers,
            params={"per_page": 100, "page": page, "type": "all", "sort": "updated"}
        )
        if response.status_code != 200 or not response.json():
            break
        repos.extend(response.json())
        if len(response.json()) < 100:
            break
        page += 1
    return repos

def fetch_contribution_data_graphql(username):
    """Fetch contribution data using GitHub's GraphQL API"""
    if not GITHUB_TOKEN:
        return None
    
    query = """
    query($username: String!, $from: DateTime!, $to: DateTime!) {
      user(login: $username) {
        contributionsCollection(from: $from, to: $to) {
          totalCommitContributions
          totalPullRequestContributions
          totalIssueContributions
          totalRepositoryContributions
          totalPullRequestReviewContributions
          restrictedContributionsCount
          contributionCalendar {
            totalContributions
            weeks {
              contributionDays {
                contributionCount
                date
                weekday
              }
            }
          }
          commitContributionsByRepository(maxRepositories: 100) {
            repository {
              name
              primaryLanguage {
                name
                color
              }
            }
            contributions {
              totalCount
            }
          }
        }
        repositories(first: 100, orderBy: {field: UPDATED_AT, direction: DESC}) {
          nodes {
            name
            stargazerCount
            forkCount
            primaryLanguage {
              name
              color
            }
          }
        }
        pullRequests(first: 100, states: [MERGED], orderBy: {field: CREATED_AT, direction: DESC}) {
          totalCount
        }
        issues(first: 100, states: [CLOSED], orderBy: {field: CREATED_AT, direction: DESC}) {
          totalCount
        }
      }
    }
    """
    
    variables = {
        "username": username,
        "from": f"{YEAR}-01-01T00:00:00Z",
        "to": f"{YEAR}-12-31T23:59:59Z"
    }
    
    response = requests.post(
        GRAPHQL_URL,
        headers={"Authorization": f"Bearer {GITHUB_TOKEN}", "Content-Type": "application/json"},
        json={"query": query, "variables": variables}
    )
    
    if response.status_code == 200:
        return response.json().get("data", {}).get("user", {})
    return None

def fetch_events(username, max_pages=10):
    """Fetch recent events for a user (last 90 days only)"""
    events = []
    for page in range(1, max_pages + 1):
        response = requests.get(
            f"{API_BASE}/users/{username}/events",
            headers=headers,
            params={"per_page": 100, "page": page}
        )
        if response.status_code != 200 or not response.json():
            break
        events.extend(response.json())
    return events

def calculate_stats(username, repos, events, graphql_data):
    """Calculate various statistics from the data"""
    stats = {
        "total_commits": 0,
        "total_prs": 0,
        "total_prs_merged": 0,
        "total_issues": 0,
        "total_issues_closed": 0,
        "repos_contributed": 0,
        "languages": defaultdict(lambda: {"count": 0, "color": "#8b949e"}),
        "monthly_contributions": defaultdict(int),
        "daily_contributions": defaultdict(int),
        "hourly_contributions": defaultdict(int),
        "repo_commits": defaultdict(int),
        "stars_received": 0,
        "forks_received": 0,
        "current_streak": 0,
        "longest_streak": 0,
        "total_contributions": 0,
        "contribution_dates": set()
    }
    
    # Use GraphQL data if available (most accurate)
    if graphql_data:
        contrib = graphql_data.get("contributionsCollection", {})
        stats["total_commits"] = contrib.get("totalCommitContributions", 0)
        stats["total_prs"] = contrib.get("totalPullRequestContributions", 0)
        stats["total_issues"] = contrib.get("totalIssueContributions", 0)
        stats["repos_contributed"] = contrib.get("totalRepositoryContributions", 0)
        stats["total_contributions"] = contrib.get("contributionCalendar", {}).get("totalContributions", 0)
        
        # Get repo commits and languages from GraphQL
        for repo_contrib in contrib.get("commitContributionsByRepository", []):
            repo = repo_contrib.get("repository", {})
            repo_name = repo.get("name", "")
            commits = repo_contrib.get("contributions", {}).get("totalCount", 0)
            if repo_name and commits > 0:
                stats["repo_commits"][repo_name] = commits
            
            lang = repo.get("primaryLanguage")
            if lang:
                stats["languages"][lang["name"]]["count"] += commits
                stats["languages"][lang["name"]]["color"] = lang.get("color", "#8b949e")
        
        # Process contribution calendar for streaks and daily data
        calendar = contrib.get("contributionCalendar", {})
        all_days = []
        day_names = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]
        
        for week in calendar.get("weeks", []):
            for day in week.get("contributionDays", []):
                date_str = day.get("date", "")
                count = day.get("contributionCount", 0)
                weekday = day.get("weekday", 0)
                
                if count > 0:
                    stats["contribution_dates"].add(date_str)
                    stats["daily_contributions"][day_names[weekday]] += count
                    
                    # Extract month
                    if date_str:
                        month = datetime.strptime(date_str, "%Y-%m-%d").strftime("%b")
                        stats["monthly_contributions"][month] += count
                
                all_days.append({"date": date_str, "count": count})
        
        # Calculate streaks
        if all_days:
            current_streak = 0
            longest_streak = 0
            temp_streak = 0
            
            # Filter to only include days up to today
            today = datetime.now().strftime("%Y-%m-%d")
            valid_days = [d for d in all_days if d["date"] <= today]
            
            for day in valid_days:
                if day["count"] > 0:
                    temp_streak += 1
                    longest_streak = max(longest_streak, temp_streak)
                else:
                    temp_streak = 0
            
            # Current streak (from today backwards)
            for day in reversed(valid_days):
                if day["count"] > 0:
                    current_streak += 1
                else:
                    break
            
            stats["longest_streak"] = longest_streak
            stats["current_streak"] = current_streak
        
        # Get stars and forks from repos
        for repo in graphql_data.get("repositories", {}).get("nodes", []) or []:
            if repo:
                stats["stars_received"] += repo.get("stargazerCount", 0) or 0
                stats["forks_received"] += repo.get("forkCount", 0) or 0
        
        stats["total_prs_merged"] = (graphql_data.get("pullRequests") or {}).get("totalCount", 0)
        stats["total_issues_closed"] = (graphql_data.get("issues") or {}).get("totalCount", 0)
    
    else:
        # Fallback to REST API data
        for repo in repos:
            if repo.get("stargazers_count"):
                stats["stars_received"] += repo["stargazers_count"]
            if repo.get("forks_count"):
                stats["forks_received"] += repo["forks_count"]
            if repo.get("language"):
                stats["languages"][repo["language"]]["count"] += 1
        
        # Process events
        repos_set = set()
        for event in events:
            event_date = datetime.strptime(event["created_at"], "%Y-%m-%dT%H:%M:%SZ")
            
            if event_date.year != YEAR:
                continue
                
            month = event_date.strftime("%b")
            day = event_date.strftime("%a")
            hour = event_date.hour
            date_str = event_date.strftime("%Y-%m-%d")
            
            if event["type"] == "PushEvent":
                commits = len(event.get("payload", {}).get("commits", []))
                stats["total_commits"] += commits
                stats["monthly_contributions"][month] += commits
                stats["daily_contributions"][day] += commits
                stats["hourly_contributions"][hour] += commits
                stats["contribution_dates"].add(date_str)
                repo_name = event.get("repo", {}).get("name", "").split("/")[-1]
                if repo_name:
                    stats["repo_commits"][repo_name] += commits
                    repos_set.add(repo_name)
                    
            elif event["type"] == "PullRequestEvent":
                action = event.get("payload", {}).get("action", "")
                if action == "opened":
                    stats["total_prs"] += 1
                elif action == "closed" and event.get("payload", {}).get("pull_request", {}).get("merged"):
                    stats["total_prs_merged"] += 1
                stats["monthly_contributions"][month] += 1
                stats["contribution_dates"].add(date_str)
                    
            elif event["type"] == "IssuesEvent":
                action = event.get("payload", {}).get("action", "")
                if action == "opened":
                    stats["total_issues"] += 1
                elif action == "closed":
                    stats["total_issues_closed"] += 1
                stats["monthly_contributions"][month] += 1
                stats["contribution_dates"].add(date_str)
        
        stats["repos_contributed"] = len(repos_set)
        stats["total_contributions"] = stats["total_commits"] + stats["total_prs"] + stats["total_issues"]
    
    return stats

def get_developer_personality(stats):
    """Determine developer personality based on activity patterns"""
    if stats["total_commits"] > 500:
        return ("rocket", "CODE MACHINE", "You shipped code like there's no tomorrow!")
    elif stats["total_prs"] > 50:
        return ("handshake", "COLLABORATION KING", "You're all about teamwork and code reviews!")
    elif stats["total_issues"] > 30:
        return ("bug", "BUG HUNTER", "No bug is safe when you're around!")
    elif stats["longest_streak"] > 30:
        return ("fire", "STREAK MASTER", "Consistency is your middle name!")
    elif len(stats["languages"]) > 5:
        return ("palette", "POLYGLOT DEVELOPER", "You speak many programming languages!")
    elif stats["stars_received"] > 100:
        return ("star", "STAR COLLECTOR", "Your repos shine bright like diamonds!")
    elif stats["total_contributions"] > 200:
        return ("muscle", "DEDICATED DEVELOPER", "You put in the work, day after day!")
    else:
        return ("seedling", "GROWING DEVELOPER", "Every commit is a step forward!")

def get_peak_coding_time(hourly_data):
    """Determine when the user codes most"""
    if not hourly_data:
        return "Unknown"
    peak_hour = max(hourly_data, key=hourly_data.get)
    if 5 <= peak_hour < 12:
        return "Morning Coder"
    elif 12 <= peak_hour < 17:
        return "Afternoon Warrior"
    elif 17 <= peak_hour < 21:
        return "Evening Hacker"
    else:
        return "Night Owl"

# Fetch all data
user_data = fetch_user_data(GITHUB_USERNAME)
repos = fetch_repos(GITHUB_USERNAME)
events = fetch_events(GITHUB_USERNAME)
graphql_data = fetch_contribution_data_graphql(GITHUB_USERNAME)
stats = calculate_stats(GITHUB_USERNAME, repos, events, graphql_data)
personality = get_developer_personality(stats)
coding_time = get_peak_coding_time(dict(stats["hourly_contributions"]))
```

```{python}
#| label: hero
hero_html = f'''
<div class="hero">
    <h1>GITHUB WRAPPED<span class="year">{YEAR}</span></h1>
    <p class="username">@{GITHUB_USERNAME}</p>
</div>
'''
display(HTML(hero_html))
```

```{python}
#| label: stats-grid
stats_html = f'''
<h2 class="section-header">YOUR YEAR IN CODE</h2>
<div class="stats-grid">
    <div class="stat-card">
        <div class="number">{stats["total_contributions"]:,}</div>
        <div class="label">Total Contributions</div>
    </div>
    <div class="stat-card blue">
        <div class="number">{stats["total_commits"]:,}</div>
        <div class="label">Commits</div>
    </div>
    <div class="stat-card purple">
        <div class="number">{stats["total_prs"]:,}</div>
        <div class="label">Pull Requests</div>
    </div>
    <div class="stat-card orange">
        <div class="number">{stats["repos_contributed"]:,}</div>
        <div class="label">Repos Contributed</div>
    </div>
</div>
'''
display(HTML(stats_html))
```

```{python}
#| label: streak
streak_html = f'''
<h2 class="section-header">YOUR CODING STREAK</h2>
<div class="streak-section">
    <div class="streak-fire">üî•</div>
    <div class="streak-number">{stats["longest_streak"]}</div>
    <div class="streak-label">Day Longest Streak</div>
    <p style="color: var(--gh-text-muted); margin-top: 1.5rem; font-size: 1.1rem;">
        Current streak: <span style="color: var(--gh-orange); font-weight: 600;">{stats["current_streak"]} days</span>
    </p>
    <p style="color: var(--gh-text-muted); margin-top: 0.5rem;">
        You showed up and coded consistently. That's what separates the best from the rest!
    </p>
</div>
'''
display(HTML(streak_html))
```

```{python}
#| label: personality
icon_type, title, description = personality

icon_map = {
    "rocket": "üöÄ",
    "handshake": "ü§ù",
    "bug": "üêõ",
    "fire": "üî•",
    "palette": "üé®",
    "star": "‚≠ê",
    "muscle": "üí™",
    "seedling": "üå±"
}
emoji = icon_map.get(icon_type, "üíª")

personality_html = f'''
<h2 class="section-header">YOUR DEVELOPER PERSONALITY</h2>
<div class="personality-badge">
    <div class="emoji">{emoji}</div>
    <div class="title">{title}</div>
    <div class="description">{description}</div>
</div>
'''
display(HTML(personality_html))
```

```{python}
#| label: most-active-repo
top_repos = sorted(stats["repo_commits"].items(), key=lambda x: x[1], reverse=True)
if top_repos:
    top_repo_name, top_repo_commits = top_repos[0]
    
    trophy_html = f'''
    <h2 class="section-header">MOST ACTIVE REPOSITORY</h2>
    <div class="trophy-showcase">
        <div class="trophy">üèÜ</div>
        <div class="repo-name">{top_repo_name}</div>
        <div class="repo-stats">
            <div class="repo-stat"><span>{top_repo_commits}</span> commits</div>
        </div>
        <p style="color: var(--gh-text-muted); margin-top: 1.5rem;">
            This repo got most of your attention this year!
        </p>
    </div>
    '''
    display(HTML(trophy_html))
```

```{python}
#| label: top-repos
if top_repos:
    top_5 = top_repos[:5]
    max_commits = max(top_5[0][1], 1) if top_5 else 1
    
    bars_html = '<h2 class="section-header">TOP REPOSITORIES</h2><div class="repo-bars">'
    
    ranks = ["gold", "silver", "bronze", "green", "blue"]
    rank_labels = ["1", "2", "3", "4", "5"]
    
    for i, (repo_name, commits) in enumerate(top_5):
        width = (commits / max_commits) * 100 if max_commits > 0 else 0
        rank_class = ranks[i] if i < len(ranks) else "other"
        rank_label = rank_labels[i] if i < len(rank_labels) else str(i+1)
        
        bars_html += f'''
        <div class="repo-bar-item">
            <div class="repo-rank {rank_class}">{rank_label}</div>
            <div class="repo-info">
                <div class="repo-name-bar">{repo_name}</div>
                <div class="repo-progress">
                    <div class="repo-progress-fill {rank_class}" style="width: {width}%;">
                        {commits} commits
                    </div>
                </div>
            </div>
        </div>
        '''
    
    bars_html += '</div>'
    display(HTML(bars_html))
```

```{python}
#| label: monthly-chart
months_order = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
monthly_data = {m: stats["monthly_contributions"].get(m, 0) for m in months_order}
max_monthly = max(monthly_data.values()) if monthly_data.values() else 1
peak_month = max(monthly_data, key=monthly_data.get) if any(monthly_data.values()) else None

chart_html = '<h2 class="section-header">MONTHLY CONTRIBUTIONS</h2><div class="monthly-chart">'

for month in months_order:
    value = monthly_data[month]
    height = (value / max_monthly) * 180 if max_monthly > 0 else 0
    is_peak = "peak" if month == peak_month and value > 0 else ""
    
    chart_html += f'''
    <div class="month-bar">
        <div class="value">{value}</div>
        <div class="bar {is_peak}" style="height: {max(height, 5)}px;"></div>
        <div class="label">{month}</div>
    </div>
    '''

chart_html += '</div>'
if peak_month and monthly_data.get(peak_month, 0) > 0:
    chart_html += f'<p style="text-align: center; color: var(--gh-blue); margin-top: 1rem;">Peak month: <strong>{peak_month}</strong> with {monthly_data[peak_month]} contributions!</p>'

display(HTML(chart_html))
```

```{python}
#| label: heatmaps
days_order = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]
daily_data = {d: stats["daily_contributions"].get(d, 0) for d in days_order}
max_daily = max(daily_data.values()) if daily_data.values() else 1

time_periods = [
    ("12am-6am", range(0, 6)),
    ("6am-12pm", range(6, 12)),
    ("12pm-6pm", range(12, 18)),
    ("6pm-12am", range(18, 24))
]

hourly_data = dict(stats["hourly_contributions"])
time_data = {}
for label, hours in time_periods:
    time_data[label] = sum(hourly_data.get(h, 0) for h in hours)
max_time = max(time_data.values()) if time_data.values() else 1

def get_heat_level(value, max_val):
    if max_val == 0 or value == 0:
        return 0
    ratio = value / max_val
    if ratio < 0.2:
        return 1
    elif ratio < 0.4:
        return 2
    elif ratio < 0.6:
        return 3
    elif ratio < 0.8:
        return 4
    else:
        return 5

heatmap_html = '''
<h2 class="section-header">WHEN DO YOU CODE?</h2>
<div class="heatmap-container">
    <div class="heatmap">
        <h3>Day of Week</h3>
        <div class="heatmap-grid">
'''

for day in days_order:
    value = daily_data[day]
    heat = get_heat_level(value, max_daily)
    heatmap_html += f'''
        <div class="heatmap-row">
            <div class="heatmap-label">{day}</div>
            <div class="heatmap-cell heat-{heat}">{value}</div>
        </div>
    '''

heatmap_html += '''
        </div>
    </div>
    <div class="heatmap">
        <h3>Time of Day</h3>
        <div class="heatmap-grid">
'''

for label in ["12am-6am", "6am-12pm", "12pm-6pm", "6pm-12am"]:
    value = time_data[label]
    heat = get_heat_level(value, max_time)
    heatmap_html += f'''
        <div class="heatmap-row">
            <div class="heatmap-label">{label}</div>
            <div class="heatmap-cell heat-{heat}">{value}</div>
        </div>
    '''

heatmap_html += '''
        </div>
    </div>
</div>
'''

if coding_time != "Unknown":
    heatmap_html += f'<p style="text-align: center; color: var(--gh-purple); margin-top: 1rem; font-size: 1.2rem;">You\'re a <strong>{coding_time}</strong></p>'

display(HTML(heatmap_html))
```

```{python}
#| label: languages
language_colors = {
    "Python": "#3572A5",
    "JavaScript": "#f1e05a",
    "TypeScript": "#2b7489",
    "Java": "#b07219",
    "C++": "#f34b7d",
    "C": "#555555",
    "C#": "#178600",
    "Go": "#00ADD8",
    "Rust": "#dea584",
    "Ruby": "#701516",
    "PHP": "#4F5D95",
    "Swift": "#ffac45",
    "Kotlin": "#F18E33",
    "HTML": "#e34c26",
    "CSS": "#563d7c",
    "Shell": "#89e051",
    "Jupyter Notebook": "#DA5B0B",
    "Vue": "#41b883",
    "Dart": "#00B4AB"
}

if stats["languages"]:
    total_lang = sum(l["count"] for l in stats["languages"].values())
    sorted_langs = sorted(stats["languages"].items(), key=lambda x: x[1]["count"], reverse=True)[:8]
    
    if total_lang > 0:
        lang_html = '<h2 class="section-header">LANGUAGES YOU SPOKE</h2><div class="languages-chart">'
        
        for lang, data in sorted_langs:
            percent = (data["count"] / total_lang) * 100
            color = data.get("color") or language_colors.get(lang, "#8b949e")
            
            lang_html += f'''
            <div class="language-item">
                <div class="language-dot" style="background: {color};"></div>
                <span class="language-name">{lang}</span>
                <span class="language-percent">{percent:.1f}%</span>
            </div>
            '''
        
        lang_html += '</div>'
        display(HTML(lang_html))
```

```{python}
#| label: fun-facts
lines_estimate = stats["total_commits"] * 50
bugs_squashed = stats["total_commits"] * 3 + stats["total_issues_closed"] * 10

fun_facts_html = f'''
<h2 class="section-header">FUN FACTS</h2>
<div class="fun-facts">
    <div class="fun-fact">
        You mass-murdered approximately <span class="highlight">{bugs_squashed:,}</span> bugs this year
    </div>
    <div class="fun-fact">
        Your repositories collected <span class="highlight">{stats["stars_received"]:,}</span> stars
    </div>
    <div class="fun-fact">
        Your code was forked <span class="highlight">{stats["forks_received"]:,}</span> times
    </div>
    <div class="fun-fact">
        You wrote approximately <span class="highlight">{lines_estimate:,}</span> lines of code
    </div>
    <div class="fun-fact">
        That's about <span class="highlight">{stats["total_commits"] * 2:,}</span> cups of coffee worth of coding
    </div>
</div>
'''
display(HTML(fun_facts_html))
```

```{python}
#| label: footer
footer_html = '''
<div class="footer">
    <div class="tagline">Same time next year?</div>
    <a href="https://github.com/isfarbaset/git-wrapped" target="_blank" class="github-btn" title="View on GitHub">
        <svg viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
        </svg>
    </a>
</div>
'''
display(HTML(footer_html))
```
